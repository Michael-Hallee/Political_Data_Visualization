<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polls</title>
</head>

<body>

    <header>

    </header>

    <section>

    </section>

  <script>
  const header = document.querySelector('header');
  const section = document.querySelector('section');

  let requestURL = 'https://projects.fivethirtyeight.com/polls/polls.json';
  let request = new XMLHttpRequest();
  request.open('GET', requestURL);
  request.responseType = 'json';
  request.send();

  request.onload = function() {
    const polls = request.response;
    populateHeader(polls);
    listAllPolls(polls);
  }

  function populateHeader(jsonObj) {
    const myH1 = document.createElement('h1');
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var yyyy = today.getFullYear();
    today = mm + '/' + dd + '/' + yyyy;
    myH1.textContent = 'Updated: ' + today
    header.appendChild(myH1);

    // const myPara = document.createElement('p');
    // myPara.textContent = 'Hometown: ' + jsonObj['homeTown'] + ' // Formed: ' + jsonObj['formed'];
    // header.appendChild(myPara);
  }

  function listPollsByDate(polls) {

    for(let i = 0; i < polls.length; i++) {
      const myArticle = document.createElement('article');
      const myH2 = document.createElement('h2');
      const myPara1 = document.createElement('p');
      const myPara2 = document.createElement('p');
      const myPara3 = document.createElement('p');
      const myList = document.createElement('ul');

      myH2.textContent = polls[i].pollster;
      myPara1.textContent = 'End Date: ' + polls[i].endDate;
      myPara2.textContent = 'Dem: ' + polls[i].answers[0].pct
      myPara3.textContent = 'Rep: ' + polls[i].answers[1].pct

    //   const superPowers = heroes[i].powers;
    //   for(let j = 0; j < superPowers.length; j++) {
    //     const listItem = document.createElement('li');
    //     listItem.textContent = superPowers[j];
    //     myList.appendChild(listItem);
    //   }

      myArticle.appendChild(myH2);
      myArticle.appendChild(myPara1);
      myArticle.appendChild(myPara2);
      myArticle.appendChild(myPara3);
    //   myArticle.appendChild(myList);

      section.appendChild(myArticle);
    }
  }

  function listAllPolls(polls) {

    for(let i = 0; i < polls.length; i++) {
      const myArticle = document.createElement('article');
      const myH2 = document.createElement('h2');
      const myPara1 = document.createElement('p');
      const myPara2 = document.createElement('p');
      const myPara3 = document.createElement('p');
      const myList = document.createElement('ul');

      myH2.textContent = polls[i].pollster;
      myPara1.textContent = 'End Date: ' + polls[i].endDate;
      myPara2.textContent = 'Dem: ' + polls[i].answers[0].pct
      myPara3.textContent = 'Rep: ' + polls[i].answers[1].pct

    //   const superPowers = heroes[i].powers;
    //   for(let j = 0; j < superPowers.length; j++) {
    //     const listItem = document.createElement('li');
    //     listItem.textContent = superPowers[j];
    //     myList.appendChild(listItem);
    //   }

      myArticle.appendChild(myH2);
      myArticle.appendChild(myPara1);
      myArticle.appendChild(myPara2);
      myArticle.appendChild(myPara3);
    //   myArticle.appendChild(myList);

      section.appendChild(myArticle);
    }
  }

  function median(values){
    if(values.length ===0) 
        return 0;
    values.sort(function(a,b){
        return a-b;});
    var half = Math.floor(values.length / 2);
    if (values.length % 2) 
        return values[half];
    return (values[half - 1] + values[half]) / 2.0;
  }

  </script>
    
</body>


</html>